# SGNL Environment Configuration
# Copy this file to .env and fill in your API keys

# ============ DATABASE ============

# Database URL for analytics (default: PostgreSQL)
# For PostgreSQL: postgresql://user:password@host.docker.internal:5432/dbname
# For MySQL: mysql://user:password@localhost:3306/dbname
# For SQLite: (default, no connection string needed)
DATABASE_URL=postgresql://user:password@host.docker.internal:5432/dbname

# ============ API KEYS ============

# OpenAI API Key (required for GPT-4o analysis in /deep-scan and /scan-topic)
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Tavily API Key (required for search via n8n workflow)
TAVILY_API_KEY=tvly-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============ n8n WORKFLOWS ============

# n8n webhook URL for deep scan with LLM analysis
N8N_WEBHOOK_URL=http://n8n.your-domain.com/webhook/sgnl/scan-topic

# n8n webhook URL for fast search (raw results only)
N8N_FAST_SEARCH_URL=http://n8n.your-domain.com/webhook/fast-search

# ============ RATE LIMITING ============

# Maximum requests per minute per IP (default: 3)
RATE_LIMIT=3

# Time window in seconds for rate limiting (default: 60)
RATE_WINDOW_SECONDS=60

# ============ CORS CONFIGURATION ============

# CORS allowed origins (comma-separated URLs)
ALLOWED_ORIGINS=https://your-domain.com,http://localhost:3000

# ============ SERVER CONFIGURATION ============

# API server host (default: 0.0.0.0)
HOST=0.0.0.0

# API server port (default: 8000)
PORT=8000

# ============ LOGGING ============

# Log level: DEBUG, INFO, WARNING, ERROR (default: INFO)
LOG_LEVEL=INFO

# ============ CONTENT EXTRACTION ============

# Content density threshold for skipping LLM (0.0-1.0, default: 0.45)
DENSITY_THRESHOLD=0.45

# Max content length to send to LLM (default: 12000)
LLM_MAX_CHARS=12000

# Density algorithm weights for combined scoring (sum to 1.0)
CPIDR_WEIGHT=0.5
DEPID_WEIGHT=0.3
READABILITY_WEIGHT=0.2
